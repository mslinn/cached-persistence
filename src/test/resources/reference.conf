# See https://github.com/brettwooldridge/HikariCP

akka.log-config-on-start = off
akka.log-config-on-start = ${?CONFIG_DUMP}

persistence-config {
  use: postgres
  timeout: 1 minute

  mysql {
    dataSourceClassName = "com.mysql.jdbc.jdbc2.optional.MysqlDataSource"
    leakDetectionThreshold = 2000
    numThreads = 10
    properties {
      databaseName = cadenza_model_test
      password = root
      serverName = localhost
      user = root
    }
  }

  postgres {
    connectionTimeout = 10000
    dataSourceClassName = "org.postgresql.ds.PGSimpleDataSource"
    # leakDetectionThreshold = 2000
    # numThreads = 10
    properties = {
      dataSourceClassName = ${?DB}
      password = ${?PGPASSWORD}
      serverName=${?PGSERVER}
      user = ${?USERID}

      // TODO how to specify ssl and sslFactory?
//      ssl = false
//      ssl = ${?CADENZA_SSL}

      #sslfactory = "org.postgresql.ssl.NonValidatingFactory"

      # See https://www.postgresql.org/docs/9.4/static/runtime-config-logging.html#GUC-LOG-STATEMENT
      # log_min_error_statement = NOTICE
      # log_min_error_statement = ${?POSTGRES_ERROR_LEVEL}

      # See https://www.postgresql.org/docs/9.4/static/runtime-config-logging.html#RUNTIME-CONFIG-LOGGING-WHAT
      # log_statement = all
      # log_statement = ${?POSTGRES_LOG_LEVEL}

      # maximumPoolSize = 75
      # maximumPoolSize = ${?DATABASE_MAX_POOLSIZE}
    }
  }
}
